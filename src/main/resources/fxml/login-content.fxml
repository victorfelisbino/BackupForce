<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!-- Login Content Panel - embedded in app root -->
<StackPane xmlns:fx="http://javafx.com/fxml" 
           fx:controller="com.backupforce.ui.LoginContentController"
           styleClass="login-page">
    
    <!-- Main Login Content -->
    <VBox alignment="CENTER" spacing="32">
        <padding>
            <Insets top="40" right="50" bottom="40" left="50"/>
        </padding>
        
        <!-- Header -->
        <VBox spacing="8" alignment="CENTER" style="-fx-padding: 0 0 16 0;">
            <HBox spacing="12" alignment="CENTER">
                <Label text="âš¡" style="-fx-font-size: 48px;"/>
                <Label text="BackupForce" styleClass="login-logo"/>
            </HBox>
            <Label text="Salesforce Backup &amp; Restore Tool" styleClass="login-subtitle"/>
        </VBox>
        
        <!-- Login Card -->
        <VBox spacing="20" styleClass="login-card" maxWidth="440">
            <padding>
                <Insets top="32" right="36" bottom="32" left="36"/>
            </padding>
            
            <!-- Environment Selection -->
            <VBox spacing="12">
                <Label text="Environment" styleClass="form-label"/>
                <ComboBox fx:id="environmentCombo" maxWidth="Infinity" styleClass="form-combo"/>
                <Label fx:id="environmentUrlLabel" text="OAuth will use: https://login.salesforce.com" 
                       styleClass="form-hint"/>
            </VBox>
            
            <!-- OAuth Button (Primary Action) -->
            <VBox spacing="8">
                <Button fx:id="oauthButton" text="ðŸ”’ Login with Browser (Recommended)" 
                        onAction="#handleOAuthLogin" maxWidth="Infinity" 
                        styleClass="btn btn-accent btn-lg"/>
                <Label text="Securely authenticate using Salesforce's login page" 
                       styleClass="form-hint" alignment="CENTER" textAlignment="CENTER"/>
            </VBox>
            
            <!-- Cancel Button (shown during OAuth) -->
            <Button fx:id="cancelButton" text="Cancel OAuth Login" onAction="#handleCancelOAuth" 
                    maxWidth="Infinity" styleClass="btn btn-ghost" visible="false" managed="false"/>
            
            <!-- OR Separator -->
            <HBox spacing="16" alignment="CENTER" style="-fx-padding: 4 0;">
                <Separator HBox.hgrow="ALWAYS"/>
                <Label text="or use credentials" styleClass="separator-text"/>
                <Separator HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <!-- Saved Credentials Section -->
            <VBox spacing="8" fx:id="savedCredentialsSection">
                <Label text="Saved Credentials" styleClass="form-label"/>
                <ListView fx:id="savedCredentialsList" maxHeight="100" styleClass="form-list"/>
            </VBox>
            
            <VBox spacing="8">
                <Label text="Username" styleClass="form-label"/>
                <TextField fx:id="usernameField" promptText="your.email@company.com" 
                           styleClass="form-input"/>
            </VBox>
            
            <VBox spacing="8">
                <Label text="Password" styleClass="form-label"/>
                <PasswordField fx:id="passwordField" promptText="Your Salesforce password" 
                               styleClass="form-input"/>
            </VBox>
            
            <VBox spacing="8">
                <Label text="Security Token" styleClass="form-label"/>
                <PasswordField fx:id="tokenField" promptText="Leave empty if IP is whitelisted" 
                               styleClass="form-input"/>
            </VBox>
            
            <CheckBox fx:id="rememberCredentialsCheckBox" text="Remember credentials" 
                      styleClass="form-checkbox" style="-fx-padding: 4 0;"/>
            
            <Button fx:id="loginButton" text="Login with Credentials" onAction="#handleLogin" 
                    maxWidth="Infinity" styleClass="btn btn-primary"/>
            
            <!-- Status Section -->
            <HBox spacing="12" alignment="CENTER" style="-fx-padding: 8 0 0 0;">
                <ProgressIndicator fx:id="progressIndicator" prefWidth="20" prefHeight="20" 
                                   visible="false"/>
                <Label fx:id="statusLabel" text="" wrapText="true" textAlignment="CENTER"
                       styleClass="form-status" style="-fx-max-width: 350px;"/>
            </HBox>
            
            <!-- OAuth timeout countdown -->
            <Label fx:id="timeoutLabel" text="" styleClass="form-hint" visible="false" managed="false"
                   alignment="CENTER" textAlignment="CENTER" maxWidth="Infinity"/>
        </VBox>
        
        <!-- Footer -->
        <VBox spacing="8" alignment="CENTER" style="-fx-padding: 16 0 0 0;">
            <Label text="Security token not needed if your IP is whitelisted in Setup â†’ Network Access" 
                   wrapText="true" textAlignment="CENTER" styleClass="login-footer" maxWidth="440"/>
            <Label text="v2.3.0 â€¢ Developed by Victor Felisbino" styleClass="login-version"/>
        </VBox>
    </VBox>
</StackPane>
