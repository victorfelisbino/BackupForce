<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" 
            fx:controller="com.backupforce.ui.HomeController"
            stylesheets="@../css/backupforce-modern.css"
            styleClass="main-container"
            prefWidth="1200" prefHeight="800"
            minWidth="1000" minHeight="700">
    
    <!-- LEFT: Sidebar Navigation -->
    <left>
        <VBox styleClass="sidebar" spacing="0">
            
            <!-- App Branding -->
            <HBox styleClass="app-brand" spacing="10" alignment="CENTER_LEFT">
                <Label text="âš¡" styleClass="app-logo-icon"/>
                <Label text="BackupForce" styleClass="app-logo"/>
            </HBox>
            
            <!-- Navigation Items -->
            <VBox styleClass="nav-section" spacing="2" VBox.vgrow="ALWAYS">
                <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>
                
                <Label text="MAIN" styleClass="nav-section-title"/>
                
                <HBox styleClass="nav-item nav-item-active" spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ " styleClass="nav-icon"/>
                    <Label text="Dashboard"/>
                </HBox>
                
                <HBox fx:id="dataBackupNav" styleClass="nav-item" spacing="10" alignment="CENTER_LEFT"
                      onMouseClicked="#handleDataBackup" style="-fx-cursor: hand;">
                    <Label text="ðŸ“¤" styleClass="nav-icon"/>
                    <Label text="Data Backup"/>
                </HBox>
                
                <HBox fx:id="dataRestoreNav" styleClass="nav-item" spacing="10" alignment="CENTER_LEFT"
                      onMouseClicked="#handleDataRestore" style="-fx-cursor: hand;">
                    <Label text="ðŸ“¥" styleClass="nav-icon"/>
                    <Label text="Data Restore"/>
                </HBox>
                
                <Region prefHeight="16"/>
                <Label text="SETTINGS" styleClass="nav-section-title"/>
                
                <HBox styleClass="nav-item" spacing="10" alignment="CENTER_LEFT"
                      onMouseClicked="#handleDatabaseConnections" style="-fx-cursor: hand;">
                    <Label text="ðŸ”—" styleClass="nav-icon"/>
                    <Label text="Connections"/>
                </HBox>
                
                <HBox styleClass="nav-item" spacing="10" alignment="CENTER_LEFT"
                      onMouseClicked="#handlePreferences" style="-fx-cursor: hand;">
                    <Label text="âš™ï¸" styleClass="nav-icon"/>
                    <Label text="Preferences"/>
                </HBox>
                
                <HBox styleClass="nav-item" spacing="10" alignment="CENTER_LEFT"
                      onMouseClicked="#handleAbout" style="-fx-cursor: hand;">
                    <Label text="â„¹ï¸" styleClass="nav-icon"/>
                    <Label text="About"/>
                </HBox>
                
                <Region VBox.vgrow="ALWAYS"/>
            </VBox>
            
            <!-- User Panel (Footer) - Hidden MenuButton for controller reference -->
            <MenuButton fx:id="settingsMenuButton" visible="false" managed="false"/>
            
            <VBox styleClass="user-panel" spacing="8">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <StackPane styleClass="user-avatar">
                        <Label text="U"/>
                    </StackPane>
                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                        <Label fx:id="usernameLabel" text="user@example.com" styleClass="user-name"/>
                        <Label fx:id="instanceLabel" text="production" styleClass="user-org"/>
                    </VBox>
                </HBox>
                <Button text="Sign Out" onAction="#handleLogout" styleClass="btn btn-ghost" 
                        maxWidth="Infinity"/>
            </VBox>
        </VBox>
    </left>
    
    <!-- CENTER: Main Content -->
    <center>
        <VBox spacing="0">
            
            <!-- Status Bar -->
            <HBox styleClass="status-bar" spacing="12" alignment="CENTER_LEFT">
                <Region styleClass="status-dot status-dot-connected"/>
                <Label fx:id="statusLabel" text="Connected to Salesforce" styleClass="status-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="16" alignment="CENTER_RIGHT">
                    <Label fx:id="lastBackupLabel" text="Last backup: Never" styleClass="status-text"/>
                    <Label text="â€¢" styleClass="status-text"/>
                    <Label fx:id="totalBackupsLabel" text="0 total backups" styleClass="status-text"/>
                </HBox>
            </HBox>
            
            <!-- Scrollable Content Area -->
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" 
                        style="-fx-background-color: transparent; -fx-background: transparent;">
                <VBox styleClass="content-area" spacing="24">
                    
                    <!-- Page Header -->
                    <VBox styleClass="page-header" spacing="4">
                        <Label text="Dashboard" styleClass="page-title"/>
                        <Label text="Backup and restore your Salesforce data with confidence" 
                               styleClass="page-subtitle"/>
                    </VBox>
                    
                    <!-- Quick Stats Row -->
                    <HBox spacing="16">
                        <VBox styleClass="stat-card" spacing="4" HBox.hgrow="ALWAYS" minWidth="140">
                            <Label text="AVAILABLE OBJECTS" styleClass="stat-card-title"/>
                            <Label fx:id="objectsAvailableLabel" text="--" styleClass="stat-card-value"/>
                        </VBox>
                        <VBox styleClass="stat-card" spacing="4" HBox.hgrow="ALWAYS" minWidth="140">
                            <Label text="LAST BACKUP" styleClass="stat-card-title"/>
                            <Label fx:id="lastDataBackupLabel" text="Never" 
                                   styleClass="stat-card-value" style="-fx-font-size: 18px;"/>
                        </VBox>
                        <VBox styleClass="stat-card" spacing="4" HBox.hgrow="ALWAYS" minWidth="140">
                            <Label text="RECORDS BACKED UP" styleClass="stat-card-title"/>
                            <Label fx:id="lastBackupRowsLabel" text="--" styleClass="stat-card-value"/>
                        </VBox>
                    </HBox>
                    
                    <!-- Action Cards Section -->
                    <VBox spacing="16">
                        <Label text="What would you like to do?" styleClass="section-title"/>
                        
                        <HBox spacing="20">
                            <!-- Data Backup Card -->
                            <VBox fx:id="dataBackupCard" styleClass="action-card" spacing="16" 
                                  onMouseClicked="#handleDataBackup" HBox.hgrow="ALWAYS">
                                <HBox spacing="16" alignment="CENTER_LEFT">
                                    <StackPane styleClass="card-icon">
                                        <Label text="ðŸ“¤"/>
                                    </StackPane>
                                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                                        <Label text="Data Backup" styleClass="card-title"/>
                                        <Label text="Export Salesforce records to CSV files or database" 
                                               styleClass="card-description" wrapText="true"/>
                                    </VBox>
                                </HBox>
                                <Label text="Click to start backup â†’" styleClass="card-action"/>
                            </VBox>
                            
                            <!-- Data Restore Card -->
                            <VBox fx:id="dataRestoreCard" styleClass="action-card" spacing="16" 
                                  onMouseClicked="#handleDataRestore" HBox.hgrow="ALWAYS">
                                <HBox spacing="16" alignment="CENTER_LEFT">
                                    <StackPane styleClass="card-icon card-icon-success">
                                        <Label text="ðŸ“¥"/>
                                    </StackPane>
                                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                                        <Label text="Data Restore" styleClass="card-title"/>
                                        <Label text="Restore records from backup to Salesforce" 
                                               styleClass="card-description" wrapText="true"/>
                                    </VBox>
                                </HBox>
                                <HBox spacing="16" alignment="CENTER_LEFT">
                                    <VBox spacing="2">
                                        <Label fx:id="restoreSourcesLabel" text="--" styleClass="stat-value"/>
                                        <Label text="Sources" styleClass="stat-label"/>
                                    </VBox>
                                    <VBox spacing="2">
                                        <Label fx:id="lastRestoreRowsLabel" text="--" styleClass="stat-value"/>
                                        <Label text="Restored" styleClass="stat-label"/>
                                    </VBox>
                                </HBox>
                                <Label fx:id="lastDataRestoreLabel" text="No restores yet" styleClass="card-badge"/>
                            </VBox>
                        </HBox>
                        
                        <!-- Coming Soon Cards -->
                        <HBox spacing="20">
                            <VBox fx:id="configBackupCard" styleClass="action-card action-card-disabled" spacing="16" HBox.hgrow="ALWAYS">
                                <HBox spacing="16" alignment="CENTER_LEFT">
                                    <StackPane styleClass="card-icon card-icon-muted">
                                        <Label text="âš™ï¸"/>
                                    </StackPane>
                                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                                        <Label text="Config Backup" styleClass="card-title"/>
                                        <Label text="Backup picklists, record types, profiles" 
                                               styleClass="card-description" wrapText="true"/>
                                    </VBox>
                                </HBox>
                                <Label text="Coming Soon" styleClass="badge badge-muted"/>
                            </VBox>
                            
                            <VBox fx:id="metadataBackupCard" styleClass="action-card action-card-disabled" spacing="16" HBox.hgrow="ALWAYS">
                                <HBox spacing="16" alignment="CENTER_LEFT">
                                    <StackPane styleClass="card-icon card-icon-muted">
                                        <Label text="ðŸ“‹"/>
                                    </StackPane>
                                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                                        <Label text="Metadata Backup" styleClass="card-title"/>
                                        <Label text="Backup Apex, triggers, flows, and metadata" 
                                               styleClass="card-description" wrapText="true"/>
                                    </VBox>
                                </HBox>
                                <Label text="Coming Soon" styleClass="badge badge-muted"/>
                            </VBox>
                        </HBox>
                    </VBox>
                    
                    <!-- Database Connections Section -->
                    <VBox spacing="16">
                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <Label text="Database Connections" styleClass="section-title"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Button text="+ Add Connection" onAction="#handleAddConnection" 
                                    styleClass="btn btn-accent btn-sm"/>
                        </HBox>
                        
                        <HBox fx:id="connectionsContainer" spacing="16">
                            <VBox styleClass="empty-state" spacing="12" HBox.hgrow="ALWAYS" 
                                  style="-fx-padding: 32; -fx-alignment: CENTER;">
                                <Label text="ðŸ”—" styleClass="empty-state-icon"/>
                                <Label fx:id="noConnectionsLabel" text="No connections configured" styleClass="empty-state-title"/>
                                <Label text="Add a database connection to backup directly to your data warehouse" 
                                       styleClass="empty-state-description" wrapText="true" textAlignment="CENTER"/>
                            </VBox>
                        </HBox>
                    </VBox>
                    
                </VBox>
            </ScrollPane>
        </VBox>
    </center>
</BorderPane>
